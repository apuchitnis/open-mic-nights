(this["webpackJsonpopen-mic-nights"]=this["webpackJsonpopen-mic-nights"]||[]).push([[0],{215:function(e,t,n){"use strict";n.r(t);var r=n(99),a=n(100),s=n(103),c=n(102),i=n(7),o=n.n(i),u=n(10),l=n(211),d=n(213),b=n(214),h=n(13),j=n.n(h),p=n(98),f=n.n(p),O=n(212),g=n.n(O),x=(n(242),n(101)),m=n(4),v=n(245).GoogleSpreadsheet;function w(e){var t=e.column,n=t.filterValue,r=t.setFilter,a=t.preFilteredRows,s=t.id,c=j.a.useMemo((function(){var e=new Set;return a.forEach((function(t){e.add(t.values[s])})),Object(b.a)(e.values())}),[s,a]);return Object(m.jsxs)("select",{value:n,onChange:function(e){r(e.target.value||void 0)},children:[Object(m.jsx)("option",{value:"",children:"All"}),c.map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},t)}))]})}function F(){var e=Object(h.useState)({headerValues:null,rows:[],isFetching:!1}),t=Object(d.a)(e,2),n=t[0],r=t[1];Object(h.useEffect)((function(){Object(l.a)(o.a.mark((function e(){var t,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Object(u.a)(Object(u.a)({},n),{},{isFetching:!0})),(t=new v("1uwHo4bGisUiQgwAnkFbVUZG2fabZD-uwaNx4JHlWnSs")).useApiKey("AIzaSyDWzk5MJLYVpzppXB9xxJWjVJnoe97erbc"),e.next=6,t.loadInfo();case 6:return a=t.sheetsByIndex[0],e.next=9,a.getRows();case 9:s=e.sent,r({headerValues:a.headerValues,rows:s,isFetching:!1}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),r(Object(u.a)(Object(u.a)({},n),{},{isFetching:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]);var a=j.a.useMemo((function(){return n.isFetching||null==n.headerValues?[]:n.rows.map((function(e){return{RowNumber:e.rowNumber,Bringer:e.Bringer,FacebookPage:e.FacebookPage,Frequency:e.Frequency,Name:e.Name,Venue:e.Venue,Latitude:e.Latitude,Longitude:e.Longitude}}))}),[n]),s=j.a.useMemo((function(){return n.isFetching||null==n.headerValues?[]:[{Header:"Bringer",accessor:"Bringer",Filter:w},{Header:"Facebook Page",accessor:"FacebookPage"},{Header:"Frequency",accessor:"Frequency"},{Header:"Name",accessor:"Name"},{Header:"Venue",accessor:"Venue"},{Header:"Latitude",accessor:"Latitude"},{Header:"Longitude",accessor:"Longitude"},{Header:"RowNumber",acccessor:"RowNumber"}]}),[n]),c=j.a.useMemo((function(){return{text:function(e,t,n){return e.filter((function(e){var r=e.values[t];return void 0===r||String(r).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),i=j.a.useMemo((function(){return{Filter:w}}),[]),b=Object(x.useTable)({columns:s,data:a,defaultColumn:i,filterTypes:c},x.useFilters),p=b.getTableProps,f=b.getTableBodyProps,O=b.headerGroups,g=b.rows,F=b.prepareRow;b.state;return Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"map",children:Object(m.jsx)(N,{results:g})}),Object(m.jsx)("span",{className:"spantable",children:Object(m.jsxs)("table",Object(u.a)(Object(u.a)({className:"table is-hoverable"},p()),{},{children:[Object(m.jsx)("thead",{children:O.map((function(e){return Object(m.jsx)("tr",Object(u.a)(Object(u.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(m.jsxs)("th",Object(u.a)(Object(u.a)({},e.getHeaderProps()),{},{children:[e.render("Header"),Object(m.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]}))}))}))}))}),Object(m.jsx)("tbody",Object(u.a)(Object(u.a)({},f()),{},{children:g.map((function(e){return F(e),Object(m.jsx)("tr",Object(u.a)(Object(u.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(m.jsx)("td",Object(u.a)(Object(u.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})]})}var y=function(e){var t=e.name;return Object(m.jsx)("div",{style:{position:"relative",bottom:50,left:"-45px",textAlign:"center",width:220,backgroundColor:"white",boxShadow:"0 2px 7px 1px rgba(0, 0, 0, 0.3)",padding:10,fontSize:14,zIndex:100},children:Object(m.jsx)("div",{style:{fontSize:16},children:t})})},k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e={border:"1px solid white",borderRadius:"50%",height:20,width:20,backgroundColor:this.props.show?"red":"blue",cursor:"pointer",zIndex:10};return Object(m.jsx)("div",{style:e,children:this.props.show&&Object(m.jsx)(y,{name:this.props.name})})}}]),n}(j.a.Component),N=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e))._onChildClick=function(e,t){a.setState((function(t){var n=t.results.findIndex((function(e){return e.show}));return n>0&&t.results[n].original.RowNumber!=parseInt(e)&&(t.results[n].show=!1),n=t.results.findIndex((function(t){return t.original.RowNumber==parseInt(e)})),t.results[n].show=!t.results[n].show,{results:t.results}}))},a.state={results:[]},a}return Object(a.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.results!=e.results&&this.setState((function(){return{results:t.props.results.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{show:!1})}))}}))}},{key:"render",value:function(){return Object(m.jsx)("div",{id:"map",children:Object(m.jsx)(g.a,{bootstrapURLKeys:{key:"AIzaSyB2xTrXYV7Y6bN1BVVPrt2ZUglBPTZ-2S4"},defaultCenter:{lat:51.5074,lng:-.05},defaultZoom:14,onChildClick:this._onChildClick,children:this.state.results.map((function(e){return Object(m.jsx)(k,{lat:e.original.Latitude,lng:e.original.Longitude,name:e.original.Name,show:e.show},e.original.RowNumber)}))})})}}]),n}(j.a.Component);function C(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"title",children:"Search Open Mic Nights in London"}),Object(m.jsx)("nav",{children:Object(m.jsx)(F,{})}),Object(m.jsxs)("h5",{children:["Website created with \u2764 by ",Object(m.jsx)("a",{href:"https://apuchitnis.github.io/",children:"@apuchitnis"}),". Thanks to GC for compiling all of the data."]})]})}var V=document.getElementById("app");f.a.render(Object(m.jsx)(C,{}),V)},242:function(e,t,n){},289:function(e,t){},291:function(e,t){},300:function(e,t){},302:function(e,t){},328:function(e,t){},330:function(e,t){},331:function(e,t){},336:function(e,t){},338:function(e,t){},357:function(e,t){},369:function(e,t){},372:function(e,t){},95:function(e,t){}},[[215,1,2]]]);
//# sourceMappingURL=main.3e771556.chunk.js.map